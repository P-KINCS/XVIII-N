<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>MISSjION 25 // THE WORDS BETWEEN US</title>
<style>
body {
  margin: 0;
  background: #f6f0e1;
  font-family: "Garamond", serif;
  color: #3b2f1f;
  text-align: center;
  overflow: hidden;
}
h1 {
  margin-top: 50px;
  color: #7a5d2b;
  letter-spacing: 1px;
}
p {
  color: #6b5635;
}
button {
  background: #fff7e2;
  border: 1px solid #d4af37;
  color: #6b4a10;
  padding: 10px 20px;
  border-radius: 8px;
  cursor: pointer;
  font-family: inherit;
  font-size: 16px;
}
#startScreen, #taskScreen, #finalScreen {
  display: none;
}
input {
  border: 1px solid #d9ccb7;
  border-radius: 6px;
  padding: 8px 10px;
  font-size: 18px;
  text-align: center;
  font-family: inherit;
  color: #3b2f1f;
  width: 140px;
  margin: 0 5px;
}
.hint {
  display: none;
  margin-top: 8px;
  font-style: italic;
  color: #7a5d2b;
}
#dust {
  position: fixed;
  inset: 0;
  pointer-events: none;
  display: none;
  overflow: hidden;
}
.spark {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle, #ffe899 0%, #ffd24a 45%, rgba(255,215,0,0) 70%);
  opacity: 0;
  animation: fly 3s ease-out forwards;
}
@keyframes fly {
  0% { opacity: 0; transform: translate(0,0) scale(.6); }
  10% { opacity: 1; }
  100% { opacity: 0; transform: translate(var(--dx),var(--dy)) scale(.95); }
}
#finalScreen {
  position: fixed;
  inset: 0;
  background: #f8efdc;
  color: #b9932c;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 30px;
}
#finalText {
  font-size: 24px;
  line-height: 1.7;
  white-space: pre-wrap;
  text-shadow: 0 0 6px rgba(212,175,55,.35);
}
</style>
</head>
<body>

<div id="startScreen">
  <h1>MISSjION 25 // THE WORDS BETWEEN US</h1>
  <p><em>Let‚Äôs see if you can remember my words, Agent.<br>
  They were never just words‚Ä¶ they were clues.</em></p>
  <button onclick="startMission()">Start</button>
</div>

<div id="taskScreen">
  <h2 id="sentence"></h2>
  <div id="inputs"></div>
  <button id="confirmBtn" onclick="checkAnswer()">Confirm</button>
  <button id="hintBtn" onclick="toggleHint()">Hint</button>
  <div class="hint" id="hintText"></div>
  <button id="nextBtn" style="display:none;" onclick="nextStep()">Continue ‚Üí</button>
</div>

<div id="dust"></div>

<div id="finalScreen" style="display:none;">
  <div id="finalText"></div>
</div>

<script>
function norm(s){return (s||'').toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-zƒáƒç≈°ƒë≈æ]+/g,'');}

const steps = [
  {text:"Obo≈æavam kako _____.", answers:[["mirises","miri≈°es","miri≈°e≈°"]], hint:"Uvek me umiri"},
  {text:"Moje malo ________.", answers:[["sazvezdje","sazvezde","sazvezje","sazvezdje","sazvezde","sazve≈æƒëe"]], hint:"Na tvom licu"},
  {text:"Volim da naslonim _____ na tvoj _____.", answers:[["glavu","celo","ƒçelo"],["obraz"]], hint:"Nije ni≈°ta bezobrazno üíã"},
  {text:"Izluƒëuje me tvoj ______.", answers:[["pogled"]], hint:"Ne treba ti hint za ovo. üòé"},
  {text:"Mnogo mi je slatko kad ______.", answers:[["suska≈°","≈°uska≈°","suskas","≈°uska≈°"]], hint:"ü§´"},
  {text:"_______ na tebe.", answers:[["ponosnasam","ponosna","ponosan"]], hint:"‚úåÔ∏è"},
  {text:"_____ ti se.", answers:[["divim"]], hint:"üòÆü§©"},
  {text:"_______ si.", answers:[["savrsen","savr≈°en"]], hint:"Zna≈°, ne zafrkavaj. ü•∞"}
];
let i=0;

const startScreen=document.getElementById("startScreen");
const taskScreen=document.getElementById("taskScreen");
const finalScreen=document.getElementById("finalScreen");
const sentence=document.getElementById("sentence");
const inputs=document.getElementById("inputs");
const hintText=document.getElementById("hintText");
const nextBtn=document.getElementById("nextBtn");
const dust=document.getElementById("dust");
const finalText=document.getElementById("finalText");

function startMission(){
  startScreen.style.display="none";
  taskScreen.style.display="block";
  showStep();
}

function showStep(){
  const s=steps[i];
  sentence.textContent=s.text;
  inputs.innerHTML="";
  s.answers.forEach((_,index)=>{
    inputs.innerHTML+=`<input id="answer${index}" type="text">`;
  });
  hintText.textContent=s.hint;
  hintText.style.display="none";
  nextBtn.style.display="none";
}

function toggleHint(){
  hintText.style.display=hintText.style.display==="block"?"none":"block";
}

function checkAnswer(){
  const s=steps[i];
  let correct=true;
  for(let j=0;j<s.answers.length;j++){
    const val=norm(document.getElementById("answer"+j).value);
    if(!s.answers[j].map(a=>norm(a)).includes(val)){
      correct=false;
    }
  }
  if(correct){
    nextBtn.style.display="inline-block";
  }else{
    alert("Not quite, Agent.");
  }
}

function nextStep(){
  sparkle();
  setTimeout(()=>{
    i++;
    if(i<steps.length){showStep();}
    else{endMission();}
  },3000);
}

function sparkle(){
  dust.style.display="block";
  for(let n=0;n<60;n++){
    const s=document.createElement("div");
    s.className="spark";
    s.style.left=window.innerWidth/2+"px";
    s.style.top=window.innerHeight/2+"px";
    s.style.setProperty("--dx",(Math.random()-0.5)*400+"px");
    s.style.setProperty("--dy",(Math.random()-0.5)*300+"px");
    document.body.appendChild(s);
    setTimeout(()=>s.remove(),3100);
  }
  setTimeout(()=>dust.style.display="none",3000);
}

function endMission(){
  taskScreen.style.display="none";
  finalScreen.style.display="flex";
  const txt=`‚ÄúI love you for all that you are,
all that you have been
and all that you will be.‚Äù

With love,
‚Äî M`;
  typeWrite(finalText,txt,25);
}

function typeWrite(el,txt,spd){el.textContent="";let i=0;(function t(){if(i<=txt.length){el.textContent=txt.slice(0,i);i++;setTimeout(t,spd);}})();}
startScreen.style.display="block";
</script>
</body>
</html>
