<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mission 11 // The Path</title>
<style>
  :root{
    --green:#00ff99;
    --green-soft:#80ffcc;
    --bg-dark:#000;
    --bg-beige:#f7ecd8;
    --ink:#3b2e2a;
    --gold:#81622b;
  }
  body{
    margin:0; padding:40px; text-align:center;
    background:var(--bg-dark); color:var(--green);
    font-family:"Courier New", monospace;
  }
  h2{ margin:0 0 12px; color:var(--green); }
  p.lead{
    color:var(--green-soft); max-width:700px; margin:0 auto 20px; font-size:16px;
  }
  blockquote{
    color:var(--green); opacity:0.9; font-style:italic; margin:10px auto 25px;
  }
  input{
    padding:10px; width:280px; background:#0a0a0a; border:1px solid var(--green);
    color:var(--green); text-align:center; font-family:"Courier New", monospace;
  }
  button{
    padding:10px 18px; margin-left:8px; background:#0a0a0a; border:1px solid var(--green);
    color:var(--green); cursor:pointer; font-family:"Courier New", monospace;
  }
  button:hover{ background:#003322; }
  #imgWrap{ margin-top:24px; }
  #imgWrap img{
    width:min(720px, 90vw); border:1px solid var(--green); display:block; margin:0 auto;
  }

  /* Reveal state */
  body.reveal{
    background:var(--bg-beige); color:var(--ink); font-family:"Garamond", "Times New Roman", serif;
    padding:60px 22px;
  }
  .hidden{ display:none !important; }

  #reveal{
    max-width:780px; margin:0 auto; text-align:left;
    color:var(--ink);
  }
  #reveal h3{
    text-align:center; margin:0 0 22px;
    color:var(--gold); letter-spacing:0.5px; font-size:28px;
  }
  #reveal p{ font-size:20px; line-height:1.55; margin:14px 0; white-space:pre-wrap; }
  #final-quote{
    margin-top:22px; font-style:italic; text-align:center; font-size:18px;
  }

  /* typing caret */
  .typing::after{
    content:""; display:inline-block; width:8px; height:1em; vertical-align:-0.2em;
    border-right:2px solid var(--ink); animation:blink .9s step-start infinite;
    margin-left:2px;
  }
  @keyframes blink { 50% { opacity:0; } }
  .fadeOut{ animation:fadeOut .5s ease forwards; }
  @keyframes fadeOut{ to { opacity:0; transform:scale(0.98); } }
</style>
</head>
<body>

<div id="stage">
  <h2>MISSION 11 // THE PATH</h2>
  <blockquote>“No hay camino, se hace camino al andar.”</blockquote>
  <p class="lead">Enter the designation of this journey to proceed.</p>

  <div>
    <input id="answer" type="text" placeholder="Enter your answer">
    <button onclick="checkAnswer()">Confirm</button>
  </div>

  <div id="imgWrap">
    <img src="IMG_8703.jpeg" alt="Fragment — Camino">
  </div>
</div>

<div id="reveal" class="hidden">
  <h3>Revealed: The Path</h3>
  <!-- Red po red, ispisivanje teksta -->
  <p id="t1" class="typing"></p>
  <p id="t2" class="typing"></p>
  <p id="t3" class="typing"></p>
  <p id="t4" class="typing"></p>
  <p id="final-quote" class="typing"></p>
</div>

<script>
  // Normalizacija unosa
  function norm(s){
    return s.trim().toLowerCase().replace(/\s+/g,' ');
  }

  function isCorrect(input){
    const s = norm(input);
    return (s === "el camino de santiago" || s === "camino de santiago");
  }

  function checkAnswer(){
    const val = document.getElementById('answer').value;
    if(!isCorrect(val)) return;

    // Fade out stage
    const stage = document.getElementById('stage');
    stage.classList.add('fadeOut');
    setTimeout(()=> {
      stage.classList.add('hidden');
      document.body.classList.add('reveal');
      document.getElementById('reveal').classList.remove('hidden');
      typeAll();
    }, 520);
  }

  // Efekat pisanja po paragrafima
  const lines = [
    "There is no single road.",
    "Each step, each silence, each moment of doubt — they were all pieces of you returning home.",
    "You were never lost.",
    "You were simply walking back to yourself.",
    "A través del aprendizaje, nos convertimos en algo más grande que antes."
  ];

  function typeLine(elemId, text, speed=22){
    return new Promise(resolve=>{
      const el = document.getElementById(elemId);
      el.textContent = "";
      let i = 0;
      const tick = () => {
        el.textContent += text.charAt(i++);
        if(i <= text.length){ setTimeout(tick, speed); }
        else { el.classList.remove('typing'); resolve(); }
      };
      tick();
    });
  }

  async function typeAll(){
    await typeLine("t1", lines[0]);
    await typeLine("t2", lines[1]);
    await typeLine("t3", lines[2]);
    await typeLine("t4", lines[3]);
    await typeLine("final-quote", lines[4], 20);
  }
</script>

</body>
</html>
