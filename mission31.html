<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MISSION 31 // THE KEY</title>
<style>
:root{
  --night:#001f3f;
  --gold:#d4af37;
  --ink:#f5e6b1;
}
html,body{
  margin:0;height:100%;
  background:var(--night);color:var(--gold);
  font-family:"Garamond",serif;overflow:hidden;
}
.wrap{
  max-width:900px;margin:0 auto;padding:40px 20px;
  text-align:center;position:relative;z-index:2;
}
h1{letter-spacing:1px;margin:0 0 20px}
p{line-height:1.7;max-width:780px;margin:12px auto}
input{
  margin:12px auto;padding:10px 12px;
  border-radius:8px;border:1px solid var(--gold);
  background:#0a223d;color:var(--ink);
  text-align:center;font-size:16px;min-width:280px;max-width:90%;
}
.btn{
  display:inline-block;margin-top:14px;padding:8px 16px;
  border:1px solid var(--gold);color:var(--gold);
  background:transparent;border-radius:8px;cursor:pointer;
  transition:all .3s ease;
}
.btn:hover{background:rgba(212,175,55,.1)}
.hidden{display:none}
.sky{
  position:fixed;inset:0;z-index:0;pointer-events:none;
}
.star{
  position:absolute;width:2px;height:2px;
  background:var(--gold);border-radius:50%;
  opacity:.5;animation:twinkle var(--t) linear infinite;
  filter:drop-shadow(0 0 5px rgba(212,175,55,.8));
}
@keyframes twinkle{
  0%,100%{opacity:.3;transform:scale(.9)}
  50%{opacity:1;transform:scale(1.4)}
}
#finalBlock{display:none;margin-top:40px}
#sig{
  font-family:"Great Vibes","Brush Script MT",cursive;
  font-size:34px;font-style:italic;
  color:var(--gold);opacity:0;
  white-space:pre-wrap;line-height:1.6;
}
#endBtn{
  display:inline-block;margin-top:24px;padding:10px 26px;
  border:2px solid var(--gold);border-radius:12px;
  color:var(--gold);font-size:20px;letter-spacing:2px;
  background:rgba(212,175,55,0.05);
  cursor:pointer;animation:pulse 1.8s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{transform:scale(1);opacity:.7}
  50%{transform:scale(1.1);opacity:1}
}
/* Image overlay */
#overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,0.95);
  display:none;justify-content:center;align-items:center;
  animation:fadeIn 2s ease forwards;z-index:10;
}
#overlay img{
  max-width:90%;max-height:90%;border:2px solid var(--gold);
  border-radius:12px;box-shadow:0 0 20px rgba(212,175,55,.6);
}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
</style>
</head>
<body>

<!-- Zlatne zvezdice -->
<div class="sky" id="sky"></div>

<div class="wrap" id="content">
  <h1>MISSION 31 // THE KEY</h1>

  <div id="s1">
    <p>Who said that everyone wants to be him — even he wants to be him?</p>
    <input id="a1" type="text" placeholder="">
    <div><button class="btn" onclick="checkA1()">Confirm</button></div>
  </div>

  <div id="s2" class="hidden">
    <p>Inside the box, there are three secrets dressed in scent.<br>
    Only one was made for him.<br><br>
    Careful now, Agent B.<br>
    One wrong move might trigger… a sweet surprise.</p>
    <input id="a2" type="text" placeholder="">
    <div><button class="btn" onclick="checkA2()">Confirm</button></div>
  </div>

  <div id="finalBlock">
    <p id="sig"></p>
    <button id="endBtn" onclick="showImage()">THE END</button>
  </div>
</div>

<div id="overlay"><img src="IMG_8893.jpeg" alt="card"></div>

<script>
/* Zlatne zvezdice */
(function makeStars(){
  const sky=document.getElementById('sky');
  for(let i=0;i<90;i++){
    const s=document.createElement('div');
    s.className='star';
    s.style.left=Math.random()*100+'vw';
    s.style.top=Math.random()*100+'vh';
    s.style.setProperty('--t',(2+Math.random()*4)+'s');
    sky.appendChild(s);
  }
})();

/* Normalizacija unosa */
function norm(s){
  return (s||'').toLowerCase()
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
    .replace(/&/g,'and').replace(/[^a-z0-9\s]/g,' ')
    .replace(/\s+/g,' ').trim();
}

/* Kucanje teksta */
function typewrite(el,txt,spd=40){
  el.textContent='';el.style.opacity=1;
  let i=0;(function step(){
    if(i<=txt.length){el.textContent=txt.slice(0,i);i++;setTimeout(step,spd);}
  })();
}

/* Logika */
function checkA1(){
  const v=norm(document.getElementById('a1').value),ok=norm("Cary Grant");
  if(v===ok){document.getElementById('s1').classList.add('hidden');
    document.getElementById('s2').classList.remove('hidden');}
  else alert("Not quite, Agent.");
}
function checkA2(){
  const v=norm(document.getElementById('a2').value),ok=norm("Creed Green Irish Tweed");
  if(v===ok){
    document.getElementById('s2').classList.add('hidden');
    document.getElementById('finalBlock').style.display='block';
    typewrite(document.getElementById('sig'),"Zauvek tvoja, Maja",70);
  } else alert("Try again.");
}

/* Otvaranje slike */
function showImage(){
  document.getElementById('overlay').style.display='flex';
}
</script>
</body>
</html>
