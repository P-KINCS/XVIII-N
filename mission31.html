<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MISSION 31 // THE KEY</title>
<style>
  :root{
    --night:#001f3f;
    --gold:#d4af37;
    --ink:#f5e6b1;
  }
  html,body{margin:0;height:100%;background:var(--night);color:var(--gold);
    font-family:"Garamond",serif;overflow-x:hidden;text-align:center;}
  .wrap{max-width:900px;margin:0 auto;padding:36px 18px;position:relative;z-index:1}
  h1{margin-top:40px;font-size:22px;letter-spacing:1px}
  p{margin:12px auto;line-height:1.7;max-width:720px}

  .fadeOut{animation:fade .8s ease forwards}
  @keyframes fade{to{opacity:0;filter:blur(2px)}}

  /* efekat zvezdica */
  #gather{position:fixed;inset:0;pointer-events:none;display:none;z-index:5}
  .speck{
    position:absolute;width:5px;height:5px;border-radius:50%;
    background:radial-gradient(circle,#fff3b0 0%,#ffd24a 40%,rgba(255,215,0,0) 80%);
    opacity:0;animation:toCenter 1.1s ease-in forwards;
  }
  @keyframes toCenter{
    0%{opacity:.2;transform:translate(0,0) scale(.6)}
    100%{opacity:0;transform:translate(var(--dx),var(--dy)) scale(.4)}
  }

  /* kljuc + potpis */
  #keyStage{display:none;position:fixed;inset:0;z-index:6;
    align-items:center;justify-content:center;flex-direction:column}
  #sig{
    margin-top:40px;font-style:italic;
    font-family:"Great Vibes","Brush Script MT",cursive;
    font-size:36px;opacity:0;animation:fadeIn 2s ease forwards;
  }
  @keyframes fadeIn{from{opacity:0}to{opacity:1}}

  /* pismo dugme */
  #letterBtn{
    display:none;font-size:60px;color:var(--gold);cursor:pointer;
    animation:pulse 1.2s ease-in-out infinite;margin-top:30px;user-select:none;
  }
  @keyframes pulse{
    0%,100%{transform:scale(1);opacity:.8}
    50%{transform:scale(1.25);opacity:1}
  }

  /* overlay slika */
  #overlay{
    display:none;position:fixed;inset:0;background:rgba(0,0,0,0.92);
    align-items:center;justify-content:center;z-index:10;
    animation:fadeIn 0.6s ease forwards;
  }
  #overlay img{
    max-width:90vw;max-height:90vh;border:3px solid var(--gold);
    border-radius:8px;box-shadow:0 0 20px rgba(212,175,55,0.5);
  }
</style>
</head>
<body>

<div class="wrap" id="content">
  <h1>MISSION 31 // THE KEY</h1>
  <p>Final stage initialized... please wait.</p>
</div>

<div id="gather"></div>

<div id="keyStage" style="display:flex;flex-direction:column;">
  <svg id="key" viewBox="0 0 256 256" fill="none"
    xmlns="http://www.w3.org/2000/svg" width="60" height="60">
    <circle cx="70" cy="128" r="42" stroke="#d4af37" stroke-width="10" fill="none"/>
    <rect x="112" y="120" width="108" height="16" fill="#d4af37"/>
    <rect x="184" y="100" width="18" height="16" fill="#d4af37"/>
    <rect x="202" y="84" width="14" height="16" fill="#d4af37"/>
  </svg>
  <p id="sig"></p>
  <div id="letterBtn" onclick="showLetter()">ðŸ’Œ</div>
</div>

<div id="overlay" onclick="hideLetter()">
  <img src="IMG_8893.jpeg" alt="Letter Image">
</div>

<script>
/* simulacija zavrÅ¡etka misije â€” pozovi showFinal() kad treba */
window.onload = () => { setTimeout(showFinal, 1000); }

function showFinal(){
  const content=document.getElementById('content');
  content.classList.add('fadeOut');
  setTimeout(()=>{
    content.style.display='none';
    gatherToCenter(160);
    setTimeout(()=>{
      const stage=document.getElementById('keyStage');
      stage.style.display='flex';
      typewrite(document.getElementById('sig'),"Zauvek tvoja, Maja",70,()=>{
        document.getElementById('letterBtn').style.display='block';
      });
    },800);
  },800);
}

/* efekat zvezdica */
function gatherToCenter(n=120){
  const layer=document.getElementById('gather');layer.innerHTML='';layer.style.display='block';
  const cx=window.innerWidth/2,cy=window.innerHeight/2;
  for(let i=0;i<n;i++){
    const sp=document.createElement('div');sp.className='speck';
    const sx=Math.random()*window.innerWidth,sy=Math.random()*window.innerHeight*0.95;
    sp.style.left=sx+'px';sp.style.top=sy+'px';
    sp.style.setProperty('--dx',(cx-sx)+'px');sp.style.setProperty('--dy',(cy-sy)+'px');
    layer.appendChild(sp);
  }
  setTimeout(()=>{layer.style.display='none';layer.innerHTML='';},1200);
}

/* ispis teksta kao da se piÅ¡e */
function typewrite(el, txt, spd=40, done){
  el.textContent='';let i=0;
  (function step(){if(i<=txt.length){el.textContent=txt.slice(0,i);i++;setTimeout(step,spd);}
  else if(done) done();})();
}

/* prikaz / skrivanje slike */
function showLetter(){
  const o=document.getElementById('overlay');
  o.style.display='flex';
}
function hideLetter(){
  document.getElementById('overlay').style.display='none';
}
</script>

</body>
</html>
