<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MISSION 22 // THE GENTTLE CODES</title>
<style>
  :root{
    --bg: #f7f1e6;
    --ink:#3b2f1f;
    --gold:#c59b2a;
    --accent:#7a5d2b;
    --ok:#2f8f46;
    --err:#b33a3a;
  }
  html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:"Garamond", Georgia, serif}
  .wrap{max-width:980px;margin:0 auto;padding:28px 16px}
  h1{font-size:22px;letter-spacing:1px;text-align:center;color:var(--accent);margin:0 0 10px}
  .lead{max-width:780px;margin:10px auto 30px;text-align:center;font-size:18px;line-height:1.5}
  .divider{height:1px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:18px 0}

  .row{display:flex;gap:18px;align-items:center;justify-content:center;margin:18px 0;padding:14px 12px;background:#fff6; border:1px solid #e8dfcf; border-radius:10px}
  .imgBox{flex:0 0 220px; display:flex; align-items:center; justify-content:center}
  .imgBox img{max-width:220px;height:auto;border:1px solid #e0d6c4;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.06)}
  .col{flex:1;min-width:240px}
  .inputWrap{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  input[type="text"]{
    padding:10px 12px;border:1px solid #d9ccb7;border-radius:8px;background:#fff;color:#3b2f1f;
    font-size:16px;min-width:160px
  }
  button{
    padding:9px 14px;border:1px solid var(--gold);background:#fff7e2;color:#6b4a10;cursor:pointer;border-radius:8px;
    font-family:"Garamond", Georgia, serif
  }
  button:hover{background:#fff1c9}
  .msg{min-height:20px;margin-top:6px;font-size:14px}
  .msg.ok{color:var(--ok)}
  .msg.err{color:var(--err)}

  .reveal{margin-top:10px;color:#45361f;min-height:24px;white-space:pre-wrap}

  .final{margin:26px 0;padding:16px;border:1px dashed #d9ccb7;border-radius:12px;background:#fff6}
  .final label{display:block;margin-bottom:8px;color:#6b4a10;font-weight:bold}
  .final input{width:100%}
  .finalQuote{display:none;margin-top:14px;padding:16px;background:#fff;border:1px solid #e8dfcf;border-radius:12px;color:#3b2f1f}
  .closing{margin-top:10px;color:#6b4a10;font-style:italic}

  @media (max-width:720px){
    .row{flex-direction:column;align-items:stretch}
    .imgBox img{max-width:100%;width:100%}
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>MISSION 22 // THE GENTTLE CODES</h1>
  <div class="lead">
    <em>“Isn’t it odd. We only see our outsides, but nearly everything happens on the inside.”</em>
  </div>
  <div class="divider"></div>

  <div class="row" id="row1">
    <div class="imgBox">
      <img src="IMG_8810.jpeg" alt="Boy">
    </div>
    <div class="col">
      <div class="inputWrap">
        <input id="in1" type="text" />
        <button onclick="checkOne(1,'boy')">Confirm</button>
      </div>
      <div class="msg" id="m1"></div>
      <div class="reveal" id="r1"></div>
    </div>
  </div>

  <div class="row" id="row2">
    <div class="imgBox">
      <img src="IMG_8811.jpeg" alt="Mole">
    </div>
    <div class="col">
      <div class="inputWrap">
        <input id="in2" type="text" />
        <button onclick="checkOne(2,'mole')">Confirm</button>
      </div>
      <div class="msg" id="m2"></div>
      <div class="reveal" id="r2"></div>
    </div>
  </div>

  <div class="row" id="row3">
    <div class="imgBox">
      <img src="IMG_8812.jpeg" alt="Fox">
    </div>
    <div class="col">
      <div class="inputWrap">
        <input id="in3" type="text" />
        <button onclick="checkOne(3,'fox')">Confirm</button>
      </div>
      <div class="msg" id="m3"></div>
      <div class="reveal" id="r3"></div>
    </div>
  </div>

  <div class="row" id="row4">
    <div class="imgBox">
      <img src="IMG_8813.jpeg" alt="Horse">
    </div>
    <div class="col">
      <div class="inputWrap">
        <input id="in4" type="text" />
        <button onclick="checkOne(4,'horse')">Confirm</button>
      </div>
      <div class="msg" id="m4"></div>
      <div class="reveal" id="r4"></div>
    </div>
  </div>

  <div class="divider"></div>

  <div class="final">
    <label for="fin">Enter the full title:</label>
    <input id="fin" type="text" />
    <div style="margin-top:8px">
      <button onclick="checkFinal()">Confirm</button>
    </div>
    <div class="finalQuote" id="finalQuote">
      <div style="margin-bottom:10px;">
        “Always remember you matter, you’re important and you are loved, and you bring to this world things no one else can.”
      </div>
      <div class="closing">Always believe in yourself, Agent B.</div>
    </div>
  </div>
</div>

<script>
function norm(s){
  return s.toLowerCase()
          .replaceAll('.', '')
          .replaceAll(',', '')
          .replaceAll('“','').replaceAll('”','')
          .replaceAll('"','')
          .replaceAll('—','-')
          .replaceAll('-', '')
          .replaceAll('’','').replaceAll("'","")
          .replaceAll('&','and')
          .replace(/\s+/g,'')
}

function typewrite(el, text, speed=28){
  el.textContent = '';
  let i=0;
  (function step(){
    if(i<=text.length){
      el.textContent = text.slice(0,i);
      i++;
      setTimeout(step, speed);
    }
  })();
}

function checkOne(idx, target){
  const input = document.getElementById('in'+idx);
  const msg = document.getElementById('m'+idx);
  const rev = document.getElementById('r'+idx);
  const val = norm(input.value);
  if(val === norm(target)){
    msg.className = 'msg ok';
    msg.textContent = '✓ Correct';
    input.disabled = true;
    if(idx===1){
      typewrite(rev, '“Sometimes I worry you’ll all realise I’m ordinary,” said the boy.');
    } else if(idx===2){
      typewrite(rev, '“Love doesn’t need you to be extraordinary.” said the mole.');
    } else if(idx===3){
      typewrite(rev, '“To be honest, I often feel I have nothing interesting to say,” said the fox.');
    } else if(idx===4){
      typewrite(rev, '“Being honest is always interesting,” said the horse.');
    }
  } else {
    msg.className = 'msg err';
    msg.textContent = 'Not quite. Try again.';
  }
}

const finalAccept = [
  'theboythemolethefoxandthehorse',
  'boymolefoxhorse'
].map(norm);

function checkFinal(){
  const fin = document.getElementById('fin');
  const fq = document.getElementById('finalQuote');
  const v = norm(fin.value);
  const correct = finalAccept.includes(v);
  if(correct){
    fin.disabled = true;
    fq.style.display = 'block';
  } else {
    fin.style.transition = 'transform 0.1s';
    fin.style.transform = 'translateX(-4px)';
    setTimeout(()=>{fin.style.transform='translateX(4px)'},80);
    setTimeout(()=>{fin.style.transform='translateX(0)'},160);
  }
}

['in1','in2','in3','in4','fin'].forEach((id,ix)=>{
  const el = document.getElementById(id);
  el.addEventListener('keypress', (e)=>{
    if(e.key==='Enter'){
      if(ix<4) checkOne(ix+1, ['boy','mole','fox','horse'][ix]);
      else checkFinal();
    }
  });
});
</script>
</body>
</html>
